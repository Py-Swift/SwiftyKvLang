<MyCanvasWidget@BoxLayout>:
    canvas.before:
        Color:
            rgba: 0.2, 0.2, 0.2, 1
        Rectangle:
            pos: self.pos
            size: self.size
    
    canvas:
        Color:
            rgb: 1, 0, 0
        Ellipse:
            pos: self.x + 50, self.y + 50
            size: 100, 100
        
        Color:
            rgba: 0, 1, 0, 0.5
        Line:
            points: [self.x, self.y, self.right, self.top]
            width: 2
    
    canvas.after:
        PushMatrix
        Rotate:
            angle: 45
            origin: self.center
        Color:
            rgb: 0, 0, 1
        Rectangle:
            pos: self.center_x - 25, self.center_y - 25
            size: 50, 50
        PopMatrix

<MyDrawingWidget@Widget>:
    canvas:
        Color:
            rgba: app.bg_color if hasattr(app, 'bg_color') else (1, 1, 1, 1)
        Rectangle:
            pos: self.pos
            size: self.size
        Color:
            rgb: 1, 1, 0
        Ellipse:
            pos: self.center_x - 20, self.center_y - 20
            size: 40, 40
